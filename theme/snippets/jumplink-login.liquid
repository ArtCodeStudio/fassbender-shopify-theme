{% if customer %}
    <div class="container pt-5">
        <div class="row">
            <div class="col-xs-12">
                {% include 'jumplink-logged-in' %}
            </div>
        </div>
    </div>
{% else %}
    <div class="container py-5">
        <div class="row">
            <div class="col-xs-12">
                <div class="text-center">
                     <h2>{{ 'customer.login.title' | t }}</h2>
                    {% include 'jumplink-customers-messages' %}
                </div>
            </div>
        </div>
    </div>

    <div class="bg-gray-lightest">
        <div class="container py-5">
            <div class="row">
                <div class="col-xs-12 text-center" id="CustomerLoginForm">

                    {% form 'customer_login' %}

                        {% if form.errors %}
                            <div class="form-errors-selector" style="display: none;">
                                {{ form.errors | default_errors }}
                            </div>
                        {% endif %}

                        {% if form.errors %}
                            <p>
                                <a href="#recover" class="RecoverPassword">{{ 'customer.login.forgot_password' | t }}</a>
                            </p>
                        {% endif %}

                        <div class="form-group">
                            <label for="CustomerEmail" class="sr-only">{{ 'customer.login.email' | t }}</label>
                            <input type="email" name="customer[email]" id="CustomerEmail" class="form-control form-control-warning border-brand-warning {% if form.errors contains 'email' %}error{% endif %}" placeholder="{{ 'customer.login.email' | t }}" autocorrect="off" autocapitalize="off" autofocus>
                        </div>

                        {% if form.password_needed %}
                            <div class="form-group input-group">
                                <label for="CustomerPassword" class="sr-only">{{ 'customer.login.password' | t }}</label>
                                <input type="password" value="" name="customer[password]" id="CustomerPassword" class="form-control form-control-warning border-brand-warning {% if form.errors contains 'password' %}error{% endif %}" placeholder="{{ 'customer.login.password' | t }}">
                                <span class="input-group-btn">
                                    <a href="#recover" id="RecoverPassword" class="btn btn-outline-warning" title="{{ 'customer.login.forgot_password' | t }}">?</a>
                                </span>
                            </div>
                        {% endif %}

                        <p>
                            <input type="submit" class="btn btn-primary submit-login" value="{{ 'customer.login.sign_in' | t }}">
                        </p>

                        <p class="text-center mt-3">
                            {{ 'customer.login.no_account' | t }} <a href="/account/register">{{ 'customer.login.create_account' | t }}</a>
                        </p>
                    {% endform %}
                </div>

                <div class="col-xs-12 text-center" id="RecoverPasswordForm" style="display: none;">

                    <h2>{{ 'customer.recover_password.title' | t }}</h2>
                    <p>{{ 'customer.recover_password.subtext' | t }}</p>

                    {% form 'recover_customer_password' %}

                        {% if form.errors %}
                            <div class="form-errors-selector" style="display: none;">
                                {{ form.errors | default_errors }}
                            </div>
                        {% endif %}

                        {% if form.posted_successfully? %}
                            {% assign resetPassword = true %}
                            <div id="resetPasswordSuccessSelector"></div>
                        {% endif %}

                        <div class="form-group">
                            <label for="RecoverEmail" class="sr-only">{{ 'customer.recover_password.email' | t }}</label>
                            <input type="email" value="" name="email" id="RecoverEmail" class="form-control form-control-warning border-brand-warning" placeholder="{{ 'customer.recover_password.email' | t }}" autocorrect="off" autocapitalize="off">
                        </div>

                        <div class="btn-group d-flex justify-content-center" role="group" aria-label="Basic example">
                            <input type="submit" class="btn btn-primary" value="{{ 'customer.recover_password.submit' | t }}">
                            <button type="button" id="HideRecoverPasswordLink" class="btn btn-secondary border-px-0">{{ 'customer.recover_password.cancel' | t }}</button>
                        </div>
                    
                    {% endform %}

                </div>

                {% comment %}
                    If accounts are set as optional, the following will be shown as an option
                    during checkout, not on the default /login page.
                {% endcomment %}
                {% if shop.checkout.guest_login %}
                    <hr>

                    <h2>{{ 'customer.login.guest_title' | t }}</h2>

                    {% form 'guest_login' %}
                        <input type="submit" class="btn btn-primary full-width" value="{{ 'customer.login.guest_continue' | t }}">
                    {% endform %}
                {% endif %}
            </div>
        </div>
    </div>
{% endif %}