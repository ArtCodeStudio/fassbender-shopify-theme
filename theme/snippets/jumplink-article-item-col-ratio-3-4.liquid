{% if colClass == blank %}
  {% assign colClass = 'col' %}
{% endif %}

{% if article.content == blank %}
  {% assign articleHasContent = false %}
{% else %}
  {% assign articleHasContent = true %}
{% endif %}

{% if article.metafields["global"]["video-1"] %}
  {% assign video = article.metafields["global"]["video-1"] %}
{% endif %}
{% if article.metafields["global"]["video-url-1"] %}
  {% assign video = article.metafields["global"]["video-url-1"] %}
{% endif %}

{% comment %} Show Video always on detail view or if no images are set {% endcomment %}
{% assign showVideo = false %}
{% if video %}
  {% if article.image == blank %}
    {% assign showVideo = true %}
  {% endif %}
{% endif %}

<rv-shopify-article-item class="{{ colClass }} px-0 content-box ratio-3-4" rv-route="'{{ article.url }}'" href="{{article.url}}" style="background-color: {{ color }};">
  {% if showVideo %}
    <video class="content has-xs-spacing has-sm-spacing" preload="auto" controls>
      <source src="{{ video }}" type="video/mp4">
      <span rv-i18n-text="'system.video_tag_not_supported'">
        {{'system.video_tag_not_supported'|t}}
      </span>
    </video>
  {% else %}
    {% if article.image %}
      {% assign image = article.image | img_url: articleImageSize %}
    {% elsif article.metafields["global"]["Image-2"] %}
      {% comment %} Fallback Image {% endcomment %}
      {% assign image = article.metafields["global"]["Image-2"] %}
    {% elsif article.metafields["global"]["detail-image-1"] %}
      {% comment %} Fallback Image {% endcomment %}
      {% assign image = article.metafields["global"]["detail-image-1"] %}
    {% elsif article.metafields["global"]["video-poster-1"] %}
      {% assign image = article.metafields["global"]["video-poster-1"] %}
    {% endif %}
    <img lazyload="auto" class="content has-xs-spacing has-sm-spacing" src="{{image}}" alt="{{acticle.title}}" style="padding: 52px" />
  {% endif %}
  {% if article.title %}
    <div class="position-absolute w-100 bottom-0" style="{{ articleTitleStyle }}">
      <div class="text-center title-xs-spacing title-sm-spacing text-truncate" style="padding: 14px 0;">
        {{ article.title }}
      </div>
    </div>
  {% endif %}
</rv-shopify-article-item>