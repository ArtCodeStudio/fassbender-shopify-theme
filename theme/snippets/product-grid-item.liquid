{% comment %}
It may be a good idea to provide a theme setting that lets a merchant decide how many products to show per row
on collection pages. Or, it may be a good idea to provide a control on the store front which lets a shopper decide 
whether items be presented in a grid or in a list.
That information about the presentation can be passed on to the product-grid-item.liquid snippet via the 'with' argument.
Use of the 'with' argument is explained here: http://docs.shopify.com/themes/theme-templates/snippets.
The information can then be referred to by accessing the variable which goes by the same name as the snippet,
in this case product-grid-item. If the 'with' argument is not used, the snippet variable is set to an empty string.
Here, for the sake of teaching, we will use 2 presentation options:
- 3 products per row, when passing the value 'three-per-row' to the snippet
- 4 products per row, when passing the value 'four-per-row' to the snippet
{% endcomment %}

{% comment %}Is this product on sale?{% endcomment %}
{% assign on_sale = false %}
{% if product.compare_at_price > product.price %}
  {% assign on_sale = true %}
{% endif %}

<div id="{{product.handle}}" class="product-item m-b-1 {% unless product.available %} sold-out{% endunless %}{% if on_sale %} on-sale{% endif %}">

  <div class="prod-image-wrap">  
    <a href="{{ product.url | within: collection }}">
      {% if product.featured_image %}
        {% assign featured_image_src = product | img_url: 'grande' %}
        {% assign images_length =  product.images | size %}
        {% if images_length > 1 %}
          {% assign hover_image_src = product.images[1] | product_img_url: 'grande' %}
          {% if featured_image_src == hover_image_src %}
            {% assign hover_image_src = product.images[0] | product_img_url: 'grande' %}
          {% endif %}
          <div class="background-box ratio-1-15" style="background-image: url({{ featured_image_src }});" data-image-featured-src="{{ featured_image_src }}" data-image-hover-src="{{ hover_image_src }}" title="{{ product.featured_image.alt | escape }}"></div>
        {% else %}
          <div class="background-box ratio-1-15" style="background-image: url({{ featured_image_src }});" title="{{ product.featured_image.alt | escape }}"></div>
        {% endif %}
      {% else %}
        <div class="background-box ratio-1-15" style="background-image: url({{ 'no-image.png' | asset_url }});" title="{{ product.featured_image.alt | escape }}"></div>
      {% endif %}
    </a>
  </div>
  
  <div class="prod-caption p-t-05">

      <p class="prod-vendor text-left m-a-0">
        <strong class="text-uppercase text-nowrap">{{ product.vendor }}</strong>
       </p>

      <p class="prod-title text-left m-a-0 text-nowrap">
        {{ product.title }}
       </p>
      <p class="prod-price text-left m-a-0 text-nowrap">
        {% assign price = product.price %}
        {% if on_sale %}
          <span class="text-danger text-nowrap">
            {% include 'get-price' with price %}
          </span>
          {% assign price = product.compare_at_price %}
        <span>
          <s class="compare-at-price text-nowrap">
            {% include 'get-price' with price %}
          </s>
        </span>
        {% else %}
        	{% include 'get-price' with price %}
        {% endif %}
      </p>
      {% comment %}
        All themes by Shopify should support the Product Reviews app out of the box.
        https://apps.shopify.com/product-reviews
      {% endcomment %}
      <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
  </div>
</div>