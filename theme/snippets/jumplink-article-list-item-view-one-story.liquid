{% comment %} Similar to sections/one-story.liquid {% endcomment %}

{% assign images_length = images | size %}
{% if images_length <= 1 %}
  {% assign ratioClass = "ratio-3-2" %}
  {% assign imageSize = "1905x1270" %}
{% else %}
  {% assign ratioClass = "ratio-3-4" %}
  {% assign imageSize = "960x1280" %}
{% endif %}

{% assign spacings = '0,0,0' | split: ',' %}

{% assign title_spacing = 7 %}

{% capture titleStyle %}
  {% if color %}
    background-color:{{ color | color_modify: 'alpha', 0.5 }};
  {% endif %}
{% endcapture %}

{% comment %} <a rv-route="'{{ article.url }}'" href="{{article.url}}" data-tags='{% include 'jumplink-utils-json-tags', tags: article.tags %}' class="container-fluid position-relative jumplink-article-list-item jumplink-article-list-item-view-one-story" style="background-color: {{ color }};"> {% endcomment %}
<div data-tags='{% include 'jumplink-utils-json-tags', tags: article.tags %}' class="container-fluid position-relative jumplink-article-list-item jumplink-article-list-item-view-one-story" style="background-color: {{ color }};">
  <div class="row">
    {% for image in images %}

      {% assign contentBoxClass = ratioClass %}

      {% comment %} The abs filter abs converts the string to number {% endcomment %}
      {% assign spacing = spacings[forloop.index0] | abs %} 

      {% if spacing > 0 %}
        {% assign imageHasSpacing = true %}
      {% else %}
        {% assign imageHasSpacing = false %}
      {% endif %}

      
      {% assign imageClass = 'content' %}
      {% if imageHasSpacing %}
        {% assign imageClass = imageClass | append: ' has-xs-spacing has-sm-spacing' %}
      {% else %}

      {% endif %}

      {% comment %} 900x1600 = 9x16 * 100 {% endcomment %}
      <div class="col px-0 content-box {{contentBoxClass}}">
        <img class="{{imageClass}}" src="{{ image }}" rv-src="'{{ image }}' | img_url '{{imageSize}}'" alt="{{acticle.title}}" style="padding: {{spacing}}px" />
      </div>
    {% endfor %}
  </div>

  {% if article.title %}
    <div class="row position-absolute bottom-0 w-100" style="{{ titleStyle }}">
      <div class="col-12 text-center title-xs-spacing title-sm-spacing text-truncate" style="padding: {{ title_spacing }}px 0;">
        {{ article.title }}
      </div>
    </div>
  {% endif %}
</div>
{% comment %} </a> {% endcomment %}