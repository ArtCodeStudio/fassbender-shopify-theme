{% assign parentID = 'jumplink-accordion-shopify' %}

<div id="{{parentID}}" data-children=".item" class="{{section.settings.column_class}}">
  <h3>{{section.settings.title}}</h3>
  {% for block in section.blocks %}
    {% assign blockID = parentID | append: forloop.index %}
    <div class="item pb-2 pt-3 border-px-1 border-brand-primary border-y">
      <a
        data-toggle="collapse"
        data-parent="#{{parentID}}"
        href="#{{blockID}}"
        aria-expanded="true"
        aria-controls="{{blockID}}"
        class="d-block {{block.settings.title_text_alignment}}"
      >
        {{ block.settings.title }}
      </a>
      <div id="{{blockID}}" class="collapse" role="tabpanel">
        <p class="mb-3">
          {{ block.settings.content }}
        </p>
        {% if block.settings.button_show %}
          <div class="{{block.settings.button_text_alignment}}">
            <a
              href="{{block.settings.button_href}}"
              class="btn {{block.settings.button_style}} {{block.settings.button_size}}"
              role="button"
              aria-pressed="true"
              style="
                margin-button: {{block.settings.button_margin_bottom}}rem;
                margin-top: {{block.settings.button_margin_top}}rem;"
            >
              {{ block.settings.button_title }}
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  {% endfor %}
</div>
{% schema %}
  {
    "name": "Accordion (Shopify)",
    "class": "jumplink-accordion",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Title",
        "default": "Accordion"
      },
      {
        "type": "text",
        "id": "column_class",
        "label": "Column Class",
        "default": "col-xs-12 col-md-8 mx-auto"
      }
    ],
    "blocks": [
      {
        "type": "accordion",
        "name": "Accordion",
        "settings": [
          {
            "type": "header",
            "content": "Title"
          },
          {
            "type": "html",
            "id": "title",
            "label": "Title"
          },
          {
            "type": "select",
            "id": "title_text_alignment",
            "label": "Title alignment",
            "options": [
              {
                "value": "text-center",
                "label": "Center"
              },
              {
                "value": "text-left",
                "label": "Left"
              },
              {
                "value": "text-right",
                "label": "Right"
              }
            ],
            "default": "text-left"
          },
          {
            "type": "header",
            "content": "Content"
          },
          {
            "type": "richtext",
            "id": "content",
            "label": "Content"
          },
          {
            "type": "checkbox",
            "id": "content_max_width_active",
            "label": "Max width",
            "default": false
          },
          {
            "type": "number",
            "id": "content_max_width",
            "label": "Max width",
            "info": "In pixel",
            "default": 610 
          },
          {
            "type": "header",
            "content": "Button"
          },
          {
            "type": "checkbox",
            "id": "button_show",
            "label": "Show",
            "default": false
          },
          {
            "type": "html",
            "id": "button_title",
            "label": "Title",
            "default": "Click me!"
          },
          {
            "type": "text",
            "id": "button_href",
            "label": "Hyperlink"
          },
          {
            "type": "select",
            "id": "button_style",
            "label": "Style",
            "options": [
              {
                "value": "btn-primary",
                "label": "Primary"
              },
              {
                "value": "btn-secondary",
                "label": "Secondary"
              },
              {
                "value": "btn-success",
                "label": "Success"
              },
              {
                "value": "btn-danger",
                "label": "Danger"
              },
              {
                "value": "btn-warning",
                "label": "Warning"
              },
              {
                "value": "btn-info",
                "label": "Info"
              },
              {
                "value": "btn-light",
                "label": "Light"
              },
              {
                "value": "btn-dark",
                "label": "Dark"
              },

              {
                "value": "btn-outline-primary",
                "label": "Primary (Outline)"
              },
              {
                "value": "btn-outline-secondary",
                "label": "Secondary (Outline)"
              },
              {
                "value": "btn-outline-success",
                "label": "Success (Outline)"
              },
              {
                "value": "btn-outline-danger",
                "label": "Danger (Outline)"
              },
              {
                "value": "btn-outline-warning",
                "label": "Warning (Outline)"
              },
              {
                "value": "btn-outline-info",
                "label": "Info (Outline)"
              },
              {
                "value": "btn-outline-light",
                "label": "Light (Outline)"
              },
              {
                "value": "btn-outline-dark",
                "label": "Dark (Outline)"
              }
            ],
            "default": "btn-outline-primary"
          },
          {
            "type": "select",
            "id": "button_size",
            "label": "Size",
            "options": [
              {
                "value": "btn-lg",
                "label": "Large"
              },
              {
                "value": "btn-md",
                "label": "Medium"
              },
              {
                "value": "btn-sm",
                "label": "Small"
              }
            ],
            "default": "btn-md"
          },
          {
            "type": "select",
            "id": "button_text_alignment",
            "label": "Alignment",
            "options": [
              {
                "value": "text-center",
                "label": "Center"
              },
              {
                "value": "text-left",
                "label": "Left"
              },
              {
                "value": "text-right",
                "label": "Right"
              }
            ],
            "default": "text-left"
          },
          {
            "type": "range",
            "id": "button_margin_top",
            "min": 0,
            "max": 30,
            "step": 1,
            "label": "Top spacing",
            "info": "margin-top in rem",
            "default": 3
          },
          {
            "type": "range",
            "id": "button_margin_bottom",
            "min": 0,
            "max": 30,
            "step": 1,
            "label": "Bottom spacing",
            "info": "margin-bottom in rem",
            "default": 1
          }
        ]
      }
    ],
    "presets": [
    ]
  }
{% endschema %}