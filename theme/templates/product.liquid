{% comment %}
  Is the current product unlocked?
{% endcomment %}
{% include 'app-jumplink-ec-product-unlocked' %}

{% if unlocked %}
  {% include 'jumplink-breadcrumbs-slide-buttons' %}

  <div class="container">
    <div data-product-handle="{{product.handle}}" class="product handle-{{product.handle}}" id="handle-{{product.handle}}" itemscope itemtype="http://schema.org/Product">
      
      <meta itemprop="url" content="{{ shop.url }}{{ product.url }}" />
      <meta itemprop="image" content="{{ product | img_url: 'grande' }}" />
      <meta itemprop="brand" content="{{ product.vendor }}" />
      <meta itemprop="name" content="{{ product.title }}" />
      <meta itemprop="priceCurrency" content="{{ shop.currency }}" />
      <meta itemprop="price" content="{{ product.price | money }}" />
      <meta itemprop="offers" itemscope itemtype="http://schema.org/Offer" />

      {% if product.available %}
        <link itemprop="availability" href="http://schema.org/InStock" />
      {% else %}
        <link itemprop="availability" href="http://schema.org/OutOfStock" />
      {% endif %}


      <form action="/cart/add" method="post" enctype="multipart/form-data">

        <div class="row">

          <div data-barba="freeze" data-collection-filter="true" class="col-xs-12 col-md-4 col-lg-3">
            {% include 'jumplink-filter' %}
          </div>
          
          <div class="product-photos col-xs-12 col-md-4 offset-md-4 col-lg-5 offset-lg-3 mb-1">
            {% comment %}{% include 'jumplink-product-photo-carousel' %}{% endcomment %}
            <product-images-slick product="product" show-thums="true" wait-for-b2bcart="false" with-fullscreen-modal="true"></product-images-slick>
          </div>
          
          <div class="product-details col-xs-12 col-md-4">
            {% comment %}
              Do we have a collection that has the same name as our product vendor name?
              If we do, let's have the vendor link point to it.
              If not, we will point to the automatic vendor collection.
            {% endcomment %}
            {% assign product_vendor_handle = product.vendor | handle %}
            {% if collections[product_vendor_handle].handle == product_vendor_handle %}
              {% assign vendor_url = collections[product_vendor_handle].url %}
            {% else %}
              {% assign vendor_url = product.vendor | url_for_vendor %}
            {% endif %}
            <product product="product" vendor-url="'{{ vendor_url }}'"></product>
          </div>
        
        </div>
      </form>

    </div>
  </div>

{% else %}
  <div class="col-xs-12">
    {% include 'jumplink-collection-locked' %}
  </div>
{% endif %}