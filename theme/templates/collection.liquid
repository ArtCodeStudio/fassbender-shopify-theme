{% comment %}
  Important notes about pagination:
  - Never access collection.products before the opening paginate tag.
  - Never paginate by more than 50.
{% endcomment %}

<div class="container-fluid">
  {% paginate collection.products by settings.products_per_page %}

    <div class="row">
      <div data-collection-filter="true" class="col-xs-12 col-md-3 col-lg-2">
        {% include 'collection-filter'%}
      </div>
      <div data-collection-products="true" class="col-xs-12 col-md-9 col-lg-10">
        {% if collection.title != 'All' %}
          <div data-collection-description="true" class="row">
            {% if collection.image %}
              <div class="col-xs-12 col-sm-6 col-md-5 col-lg-4 p-b-1 p-b-0-xs">
                <div class="background-box ratio-4-3" style="background-image:url( {{ collection.image | img_url: 'grande' }} )" alt="{{ collection.title }}"></div>
              </div>
              <div class="col-xs-12 col-sm-6 col-md-7 col-lg-8">
                {% if collection.description.size > 0 %}
                  <div class="p-b-1">
                    <h2 class="collection-title m-t-0">
                      {{ collection.title }}
                    </h2>
                    <div class="rte">
                      {{ collection.description }}
                    </div>
                  </div>
                {% endif %}
              </div>
            {% else %}

              {% if collection.description.size > 0 %}
                <div class="col-xs-12 p-b-1">
                  <h1 class="collection-title m-t-0">
                    {{ collection.title }}
                  </h1>
                  <div class="rte">
                    {{ collection.description }}
                  </div>
                </div>
              {% endif %}

            {% endif %}
          </div>
        {% endif %}
        <div class="row">
          {% for product in collection.products %}
            <div class="col-xs-6 col-sm-4 col-md-4 col-lg-3">
              {% include 'product-grid-item' with settings.products_per_page %}
            </div>
          {% else %}
            <div class="col-xs-12 text-center m-y-1">
              <p>{{ 'collection.general.empty' | t }}</p>
            </div>
          {% endfor %}
          <div class="col-xs-12">
            {% include 'pagination', show_all_active: true %}
          </div>
        </div>
      </div>

    </div>


  {% endpaginate %}

  
</div>